<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Office Hub Pro - Mobile Friendly</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f1f5f9;
            --sidebar: #1e293b;
            --text: #334155;
            --white: #ffffff;
        }
        * { box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: var(--text); display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

        /* Header cho Mobile */
        .mobile-header {
            display: none; background: var(--sidebar); color: white;
            padding: 15px; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000;
        }

        /* Sidebar - Tr√™n Desktop hi·ªán b√™n tr√°i, tr√™n Mobile l√† menu tr∆∞·ª£t */
        .container { display: flex; flex: 1; overflow: hidden; position: relative; }
        .sidebar { 
            width: 280px; background: var(--sidebar); color: white; padding: 20px; 
            display: flex; flex-direction: column; overflow-y: auto; transition: transform 0.3s ease;
        }
        .sidebar h2 { font-size: 1.2rem; color: #60a5fa; text-align: center; margin-bottom: 20px; }
        .menu-label { font-size: 0.75rem; color: #64748b; text-transform: uppercase; margin: 15px 0 5px 10px; }
        .menu-btn { 
            width: 100%; background: none; border: none; color: #94a3b8; padding: 12px 15px; 
            text-align: left; cursor: pointer; font-size: 1rem; border-radius: 10px; transition: 0.2s;
            display: flex; align-items: center; gap: 10px;
        }
        .menu-btn.active { background: var(--primary); color: white; }

        /* Main Content */
        .main { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; align-items: center; }
        .tool-card { background: var(--white); padding: 20px; border-radius: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); display: none; width: 100%; max-width: 600px; }
        .tool-card.active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Form elements */
        h3 { margin-top: 0; font-size: 1.25rem; color: var(--sidebar); border-left: 5px solid var(--primary); padding-left: 10px; }
        input, select, textarea { width: 100%; padding: 14px; margin: 8px 0; border: 1px solid #e2e8f0; border-radius: 12px; font-size: 16px; /* NgƒÉn iOS zoom input */ }
        button { background: var(--primary); color: white; border: none; padding: 14px 20px; border-radius: 12px; cursor: pointer; font-weight: 600; width: 100%; margin-top: 5px; }
        
        .result-box { background: #eff6ff; padding: 15px; border-radius: 12px; margin-top: 15px; border: 1px solid #dbeafe; color: #1e40af; word-wrap: break-word; }

        /* Ti·ªán √≠ch ƒë·∫∑c bi·ªát */
        .timer-display { font-size: 4.5rem; font-weight: 800; text-align: center; margin: 10px 0; font-family: monospace; color: var(--sidebar); }
        .todo-item { display: flex; align-items: center; background: #f8fafc; padding: 12px; margin-bottom: 8px; border-radius: 12px; gap: 10px; border: 1px solid #eee; }
        .currency-row { display: flex; gap: 10px; align-items: center; }

        /* Media Queries cho ƒêi·ªán tho·∫°i */
        @media (max-width: 768px) {
            .mobile-header { display: flex; }
            .sidebar { 
                position: fixed; left: 0; top: 0; bottom: 0; z-index: 2000; 
                transform: translateX(-100%); width: 80%; box-shadow: 20px 0 50px rgba(0,0,0,0.5);
            }
            .sidebar.open { transform: translateX(0); }
            .sidebar-overlay { 
                display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1500; 
            }
            .sidebar-overlay.show { display: block; }
            .main { padding: 15px; }
            .timer-display { font-size: 3.5rem; }
        }
    </style>
</head>
<body>

    <div class="mobile-header">
        <button onclick="toggleMenu()" style="width: auto; background: none; font-size: 1.5rem; padding: 0;">‚ò∞</button>
        <span style="font-weight: bold; letter-spacing: 1px;">OFFICE HUB PRO</span>
        <div style="width: 24px;"></div> </div>

    <div class="sidebar-overlay" id="overlay" onclick="toggleMenu()"></div>

    <div class="container">
        <div class="sidebar" id="sidebar">
            <h2>OFFICE HUB</h2>
            
            <span class="menu-label">NƒÉng su·∫•t</span>
            <button class="menu-btn active" onclick="nav('todo', this)">üìù Vi·ªác c·∫ßn l√†m</button>
            <button class="menu-btn" onclick="nav('pomodoro', this)">‚è±Ô∏è Pomodoro</button>
            <button class="menu-btn" onclick="nav('notes', this)">üìì Ghi ch√∫</button>
            <button class="menu-btn" onclick="nav('flashcards', this)">üìá Flashcards</button>

            <span class="menu-label">C√¥ng c·ª•</span>
            <button class="menu-btn" onclick="nav('currency', this)">üí± ƒê·ªïi ti·ªÅn 2 chi·ªÅu</button>
            <button class="menu-btn" onclick="nav('numToWord', this)">üí∞ S·ªë th√†nh Ch·ªØ</button>
            <button class="menu-btn" onclick="nav('calc', this)">üßÆ M√°y t√≠nh %</button>
            <button class="menu-btn" onclick="nav('age', this)">üéÇ T√≠nh tu·ªïi</button>
        </div>

        <div class="main">
            <section id="currency" class="tool-card">
                <h3>ƒê·ªïi ti·ªÅn 2 chi·ªÅu</h3>
                <div class="currency-row">
                    <select id="currFrom" onchange="convertCurrency()"><option value="USD">USD</option><option value="EUR">EUR</option><option value="CNY">CNY</option><option value="KRW">KRW</option><option value="VND">VND</option></select>
                    <button onclick="swapCurr()" style="width: 60px; background: #64748b;">‚áÑ</button>
                    <select id="currTo" onchange="convertCurrency()"><option value="VND" selected>VND</option><option value="USD">USD</option><option value="EUR">EUR</option><option value="CNY">CNY</option><option value="KRW">KRW</option></select>
                </div>
                <input type="number" id="currAmount" placeholder="Nh·∫≠p s·ªë ti·ªÅn..." oninput="convertCurrency()">
                <div class="result-box" id="currResult">K·∫øt qu·∫£: 0</div>
            </section>

            <section id="pomodoro" class="tool-card">
                <h3>Pomodoro T√πy Ch·ªânh</h3>
                <div class="timer-display" id="timer">25:00</div>
                <input type="number" id="customMins" placeholder="Nh·∫≠p s·ªë ph√∫t m·ªõi (vd: 10)">
                <button onclick="setTimer()" style="background:#64748b; margin-bottom: 10px;">ƒê·∫∑t th·ªùi gian</button>
                <div style="display: flex; gap: 10px;">
                    <button onclick="startT()" id="startBtn">B·∫Øt ƒë·∫ßu</button>
                    <button onclick="resetT()" style="background:#ef4444">Reset</button>
                </div>
            </section>

            <section id="todo" class="tool-card active">
                <h3>Vi·ªác c·∫ßn l√†m</h3>
                <div style="display: flex; gap: 8px;">
                    <input type="text" id="todoIn" placeholder="Th√™m vi·ªác...">
                    <button onclick="addT()" style="width: 80px;">Th√™m</button>
                </div>
                <div id="todoList" style="margin-top: 15px;"></div>
                <button onclick="exportX()" style="background:#22c55e; margin-top: 15px;">T·∫£i file Excel</button>
            </section>

            <section id="notes" class="tool-card">
                <h3>Ghi ch√∫ nhanh</h3>
                <textarea id="noteArea" style="height: 300px;" oninput="saveN()" placeholder="G√µ n·ªôi dung t·∫°i ƒë√¢y..."></textarea>
            </section>

            <section id="numToWord" class="tool-card">
                <h3>S·ªë th√†nh ch·ªØ</h3>
                <input type="number" id="nIn" placeholder="Nh·∫≠p s·ªë ti·ªÅn..." oninput="numToW()">
                <div class="result-box" id="wRes">K·∫øt qu·∫£...</div>
            </section>

            <section id="calc" class="tool-card">
                <h3>M√°y t√≠nh %</h3>
                <input id="cExp" placeholder="V√≠ d·ª•: 500k * 15%">
                <button onclick="runCalc()">T√≠nh to√°n</button>
                <div class="result-box" id="cRes">0</div>
            </section>

            <section id="age" class="tool-card">
                <h3>T√≠nh tu·ªïi</h3>
                <input type="date" id="bDate" onchange="runAge()">
                <div class="result-box" id="aRes">K·∫øt qu·∫£...</div>
            </section>

            <section id="flashcards" class="tool-card">
                <h3>Flashcards</h3>
                <div style="background: #fffbeb; height: 150px; display: flex; align-items: center; justify-content: center; border-radius: 15px; border: 2px dashed #fcd34d; font-size: 1.2rem; padding: 20px; text-align: center;" id="fcContent" onclick="flipFC()">
                    B·∫•m ƒë·ªÉ b·∫Øt ƒë·∫ßu
                </div>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="nextFC()">Ti·∫øp theo</button>
                </div>
                <input id="fcF" placeholder="M·∫∑t tr∆∞·ªõc" style="margin-top: 20px;">
                <input id="fcB" placeholder="M·∫∑t sau">
                <button onclick="addFC()">Th√™m th·∫ª</button>
            </section>
        </div>
    </div>

    <script>
        // ƒêi·ªÅu h∆∞·ªõng & Menu Mobile
        function toggleMenu() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('overlay').classList.toggle('show');
        }

        function nav(id, btn) {
            document.querySelectorAll('.tool-card').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
            if(window.innerWidth <= 768) toggleMenu();
        }

        // --- NGO·∫†I T·ªÜ 2 CHI·ªÄU ---
        async function convertCurrency() {
            const amt = document.getElementById('currAmount').value;
            const from = document.getElementById('currFrom').value;
            const to = document.getElementById('currTo').value;
            const res = document.getElementById('currResult');
            if(!amt) return;
            res.innerText = "ƒêang t√≠nh...";
            try {
                const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${from}`);
                const data = await response.json();
                const total = amt * data.rates[to];
                res.innerHTML = `K·∫øt qu·∫£: <b>${total.toLocaleString()} ${to}</b>`;
            } catch { res.innerText = "L·ªói k·∫øt n·ªëi!"; }
        }
        function swapCurr() {
            const f = document.getElementById('currFrom'), t = document.getElementById('currTo');
            [f.value, t.value] = [t.value, f.value]; convertCurrency();
        }

        // --- POMODORO ---
        let timer, pSecs = 1500, isR = false;
        function updateT() {
            document.getElementById('timer').innerText = `${Math.floor(pSecs/60).toString().padStart(2,'0')}:${(pSecs%60).toString().padStart(2,'0')}`;
        }
        function setTimer() {
            const m = document.getElementById('customMins').value;
            if(m>0) { pSecs = m * 60; updateT(); clearInterval(timer); isR = false; document.getElementById('startBtn').innerText = "B·∫Øt ƒë·∫ßu"; }
        }
        function startT() {
            if(isR) { clearInterval(timer); document.getElementById('startBtn').innerText = "Ti·∫øp t·ª•c"; }
            else {
                timer = setInterval(() => { pSecs--; updateT(); if(pSecs<=0){ clearInterval(timer); alert("H·∫øt gi·ªù!"); }}, 1000);
                document.getElementById('startBtn').innerText = "T·∫°m d·ª´ng";
            }
            isR = !isR;
        }
        function resetT() { clearInterval(timer); pSecs = 1500; updateT(); isR = false; document.getElementById('startBtn').innerText = "B·∫Øt ƒë·∫ßu"; }

        // --- TO-DO LIST ---
        let todos = JSON.parse(localStorage.getItem('m_todos')) || [];
        function renderT() {
            document.getElementById('todoList').innerHTML = todos.map((t, i) => `
                <div class="todo-item">
                    <input type="checkbox" ${t.d?'checked':''} onclick="toggleT(${i})">
                    <span style="flex:1; ${t.d?'text-decoration:line-through;color:gray':''}"> ${t.text}</span>
                    <button onclick="delT(${i})" style="width:40px; background:none; color:red; padding:0">‚úï</button>
                </div>
            `).join('');
            localStorage.setItem('m_todos', JSON.stringify(todos));
        }
        function addT() { const v = document.getElementById('todoIn').value; if(v){ todos.push({text:v, d:false}); document.getElementById('todoIn').value=''; renderT(); } }
        function toggleT(i) { todos[i].d = !todos[i].d; renderT(); }
        function delT(i) { todos.splice(i, 1); renderT(); }
        function exportX() {
            const ws = XLSX.utils.json_to_sheet(todos);
            const wb = XLSX.utils.book_new(); XLSX.utils.book_append_sheet(wb, ws, "CongViec");
            XLSX.writeFile(wb, "Office_Task.xlsx");
        }
        renderT();

        // --- GHI CH√ö ---
        document.getElementById('noteArea').value = localStorage.getItem('m_notes') || '';
        function saveN() { localStorage.setItem('m_notes', document.getElementById('noteArea').value); }

        // --- S·ªê TH√ÄNH CH·ªÆ ---
        function numToW() {
            const n = document.getElementById('nIn').value;
            if(n) document.getElementById('wRes').innerText = to_vn(n) + " ƒë·ªìng.";
        }
        function to_vn(n) {
            const s = ["kh√¥ng","m·ªôt","hai","ba","b·ªën","nƒÉm","s√°u","b·∫£y","t√°m","ch√≠n"];
            function g(gr) {
                let r="", [c,h,d] = gr.padStart(3,'0').split('').map(Number);
                if(c==0&&h==0&&d==0) return "";
                if(c!=0) { r+=s[c]+" trƒÉm "; if(h==0&&d!=0) r+="l·∫ª "; }
                if(h!=0&&h!=1) { r+=s[h]+" m∆∞∆°i "; if(d==1) r+="m·ªët "; }
                if(h==1) r+="m∆∞·ªùi ";
                if(d!=0 && !(h>1&&d==1)) r+=(d==5&&h!=0?"lƒÉm ":s[d]+" ");
                return r;
            }
            let res="", i=0, u=["","ngh√¨n","tri·ªáu","t·ª∑"], ns=n.toString();
            while(ns.length>0) {
                let chunk = ns.slice(-3), rChunk = g(chunk);
                if(rChunk) res = rChunk + u[i] + " " + res;
                ns = ns.slice(0,-3); i++;
            }
            return res.trim().charAt(0).toUpperCase() + res.trim().slice(1);
        }

        // --- M√ÅY T√çNH ---
        function runCalc() {
            try { 
                let exp = document.getElementById('cExp').value.replace(/k/g, '000').replace(/%/g, '/100');
                document.getElementById('cRes').innerText = eval(exp).toLocaleString();
            } catch { alert("L·ªói!"); }
        }

        // --- T√çNH TU·ªîI ---
        function runAge() {
            const b = new Date(document.getElementById('bDate').value), n = new Date();
            document.getElementById('aRes').innerText = `${n.getFullYear()-b.getFullYear()} tu·ªïi.`;
        }

        // --- FLASHCARDS ---
        let fcs = JSON.parse(localStorage.getItem('m_fcs')) || [], fIdx = 0, isBack = false;
        function flipFC() {
            if(!fcs.length) return;
            isBack = !isBack;
            document.getElementById('fcContent').innerText = isBack ? fcs[fIdx].b : fcs[fIdx].f;
            document.getElementById('fcContent').style.background = isBack ? "#fefce8" : "#fffbeb";
        }
        function nextFC() { if(fcs.length){ fIdx = (fIdx+1)%fcs.length; isBack = false; flipFC(); isBack = false; } }
        function addFC() {
            const f = document.getElementById('fcF').value, b = document.getElementById('fcB').value;
            if(f&&b){ fcs.push({f,b}); localStorage.setItem('m_fcs', JSON.stringify(fcs)); alert("ƒê√£ th√™m!"); }
        }
    </script>
</body>
</html>
